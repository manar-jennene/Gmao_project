<div class="popup-container">

  <header class="popup-header">
    <h5>Modifier le statut</h5>
    <button type="button" class="close-btn" aria-label="Close" (click)="close()">&times;</button>
  </header>

  <form [formGroup]="statutForm" (ngSubmit)="onSubmit()">
    <div class="form-group mb-3">
      <label for="statut">Libellé</label>
      <select
        id="statut"
        formControlName="statut"
        class="form-select"
        [ngClass]="{
          'is-invalid': statutForm.get('statut')?.invalid && statutForm.get('statut')?.touched
        }"
      >
        <option [ngValue]="null">-- Sélectionnez un statut --</option>
        <option *ngFor="let statut of filteredStatuts" [ngValue]="statut">
          {{ statut.libelle }}
        </option>
      </select>
      <div class="invalid-feedback" *ngIf="statutForm.get('statut')?.invalid && statutForm.get('statut')?.touched">
        Le libellé est requis.
      </div>
    </div>

    <div class="form-group mb-4">
      <label for="commentaire">Commentaire</label>
      <textarea
        id="commentaire"
        formControlName="commentaire"
        class="form-control"
        rows="3"
        placeholder="Ajouter un commentaire..."
        style="resize: vertical;"
      ></textarea>
    </div>

    <footer class="popup-footer">
      <button type="button" class="btn btn-secondary me-2" (click)="close()">Annuler</button>
      <button type="submit" class="btn btn-primary" [disabled]="statutForm.invalid">Modifier</button>
    </footer>
  </form>

</div>
