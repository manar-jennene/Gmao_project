<app-header></app-header>
<app-sidebar></app-sidebar>

<div class="main-container bg-gray-50 min-h-screen">
  <div class="xs-pd-20-10 pd-ltr-20">
    <!-- Page header -->
    <div class="page-header mb-6">
      <h3 class="font-semibold text-2xl text-gray-800">Dashboard GMAO</h3>
    </div>

    <!-- Indicateurs -->
    <div class="row clearfix progress-box mb-6">
      <div
        class="col-lg-4 col-md-6 col-sm-12 mb-30"
        *ngFor="let indicateur of indicateurs"
      >
        <div
          class="card-box bg-white rounded-2xl shadow-md p-6 text-center hover:shadow-lg transition-all duration-300"
        >
          <canvas
            [id]="indicateur.id"
            width="120"
            height="120"
            class="mx-auto"
          ></canvas>
          <h5 class="mt-4 text-lg font-semibold text-gray-700">
            {{ indicateur.label }}
          </h5>
          <span class="text-gray-500 text-sm">{{ indicateur.value }}%</span>

          <!-- Légende couleur -->
          <div
            class="legend mt-3 flex justify-center items-center gap-3 text-gray-500 text-sm"
          >
            <span
              class="inline-block w-4 h-4 rounded-sm"
              [style.background-color]="indicateur.color"
            ></span>
            Réussi
            <span
              class="inline-block w-4 h-4 rounded-sm bg-gray-300"
            ></span>
            Restant
          </div>
        </div>
      </div>
    </div>

    <!-- Graphiques -->
    <div class="row mb-6">
      <!-- Évolution des interventions -->
      <div class="col-lg-8 col-md-12 mb-4">
        <div class="card-box bg-white rounded-2xl shadow-md p-6">
          <h4 class="text-lg font-semibold text-gray-700 mb-4">
            Évolution des interventions
          </h4>
          <canvas id="interventionsChart" height="150"></canvas>
        </div>
      </div>

      <!-- État des interventions -->
      <div class="col-lg-4 col-md-12">
        <div class="card-box bg-white rounded-2xl shadow-md p-6">
          <h4 class="text-lg font-semibold text-gray-700 mb-4">
            État des interventions
          </h4>
          <canvas id="etatInterventionsChart" height="150"></canvas>
        </div>
      </div>
    </div>

 

  <div class="card-box bg-white rounded-2xl shadow-md p-6">
  <h5 class="text-lg font-semibold text-gray-700 mb-4">
    Nouveaux collaborateurs
  </h5>

  <div class="feedback-stats">
    <div
      class="feedback-row"
      *ngFor="let user of userStats"
    >
      <span class="feedback-label">{{ user.role }}</span>
      <div class="feedback-bar-container">
        <div
          class="feedback-bar"
          [style.width.%]="user.count * 20"
          [style.backgroundColor]="getColor(user.role)"
        >
          <span class="feedback-value">{{ user.count }}</span>
        </div>
      </div>
    </div>
  </div>
</div>

    </div>
  </div>
